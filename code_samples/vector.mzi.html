<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>/home/jonathan/Code/mezzo/src/stdlib/vector.mzi.html</title>
<meta name="Generator" content="Vim/7.3">
<meta name="plugin-version" content="vim7.3_v10">
<meta name="syntax" content="mezzo">
<meta name="settings" content="number_lines,use_css,expand_tabs">
<style type="text/css">
<!--
pre { font-family: monospace; color: #f6f3e8; background-color: #242424; }
body { font-family: monospace; color: #f6f3e8; background-color: #242424; }
.lnr { color: #857b6f; background-color: #000000; }
.Constant { color: #e5786d; }
.Type { color: #cae682; }
.Keyword { color: #8ac6f2; }
.Comment { color: #99968b; font-style: italic; }
-->
</style>
</head>
<body>
<pre>
<span class="lnr"> 1 </span><span class="Comment">(* This module implements resizable arrays, also known as vectors,</span>
<span class="lnr"> 2 </span><span class="Comment">   for short. *)</span>
<span class="lnr"> 3 </span>
<span class="lnr"> 4 </span><span class="Keyword">abstract</span> vector +a
<span class="lnr"> 5 </span><span class="Keyword">fact</span> <span class="Keyword">exclusive</span> <span class="Keyword">(</span>vector a<span class="Keyword">)</span>
<span class="lnr"> 6 </span>
<span class="lnr"> 7 </span><span class="Comment">(* An array has a logical size -- the number of its elements -- and a</span>
<span class="lnr"> 8 </span><span class="Comment">   physical length -- the length of the underlying array. The length</span>
<span class="lnr"> 9 </span><span class="Comment">   is always greater than or equal to the size. The vector's size can</span>
<span class="lnr">10 </span><span class="Comment">   be increased or decreased by the user. The vector's length is under</span>
<span class="lnr">11 </span><span class="Comment">   the control of the implementation. *)</span>
<span class="lnr">12 </span>
<span class="lnr">13 </span><span class="Comment">(* [create default] creates a new vector of size zero. The function [default]</span>
<span class="lnr">14 </span><span class="Comment">   is stored, and will be later invoked by [resize] when the vector is</span>
<span class="lnr">15 </span><span class="Comment">   enlarged in order to initialize the newly created slots. *)</span>
<span class="lnr">16 </span>
<span class="lnr">17 </span><span class="Keyword">val</span> create: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">(</span>default: <span class="Type">int</span> <span class="Keyword">-&gt;</span> a<span class="Keyword">)</span> <span class="Keyword">-&gt;</span> vector a
<span class="lnr">18 </span>
<span class="lnr">19 </span><span class="Comment">(* [init (size, default, f)] creates a new vector of size [size]. The function</span>
<span class="lnr">20 </span><span class="Comment">   [default] serves the same purpose as in [create] above. The function [f] is</span>
<span class="lnr">21 </span><span class="Comment">   invoked immediately in order to initialize the [size] initial elements. *)</span>
<span class="lnr">22 </span>
<span class="lnr">23 </span><span class="Keyword">val</span> init: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">(</span>size: <span class="Type">int</span>, default: <span class="Type">int</span> <span class="Keyword">-&gt;</span> a, f: <span class="Type">int</span> <span class="Keyword">-&gt;</span> a<span class="Keyword">)</span> <span class="Keyword">-&gt;</span> vector a
<span class="lnr">24 </span>
<span class="lnr">25 </span><span class="Comment">(* [grab (r, default)] turns the array [r] into a vector of the same size.</span>
<span class="lnr">26 </span><span class="Comment">   [default] serves the same purpose as in [create] above. *)</span>
<span class="lnr">27 </span>
<span class="lnr">28 </span><span class="Keyword">val</span> grab: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">(consumes</span> r: <span class="Type">array</span> a, default: <span class="Type">int</span> <span class="Keyword">-&gt;</span> a<span class="Keyword">)</span> <span class="Keyword">-&gt;</span> vector a
<span class="lnr">29 </span>
<span class="lnr">30 </span><span class="Comment">(* [list2vector (xs, default)] turns the list [xs] into a vector of the</span>
<span class="lnr">31 </span><span class="Comment">   same size. [default] serves the same purpose as in [create] above. *)</span>
<span class="lnr">32 </span>
<span class="lnr">33 </span><span class="Keyword">val</span> list2vector: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">(consumes</span> xs: <span class="Type">list</span><span class="Keyword">::</span><span class="Type">list</span> a, default: <span class="Type">int</span> <span class="Keyword">-&gt;</span> a<span class="Keyword">)</span> <span class="Keyword">-&gt;</span> vector a
<span class="lnr">34 </span>
<span class="lnr">35 </span><span class="Comment">(* [size v] returns the current size of the vector [v]. *)</span>
<span class="lnr">36 </span>
<span class="lnr">37 </span><span class="Keyword">val</span> size: <span class="Keyword">[</span>a<span class="Keyword">]</span> vector a <span class="Keyword">-&gt;</span> <span class="Type">int</span>
<span class="lnr">38 </span>
<span class="lnr">39 </span><span class="Comment">(* [resize (v, new_size)] increases or decreases the size of the vector [v]</span>
<span class="lnr">40 </span><span class="Comment">   to [new_size]. If [new_size] is greater than the vector's current size,</span>
<span class="lnr">41 </span><span class="Comment">   the function [f] that was supplied at vector creation time is invoked to</span>
<span class="lnr">42 </span><span class="Comment">   initialize the new slots. *)</span>
<span class="lnr">43 </span>
<span class="lnr">44 </span><span class="Keyword">val</span> resize: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">(</span>vector a, new_size: <span class="Type">int</span><span class="Keyword">)</span> <span class="Keyword">-&gt;</span> <span class="Constant">()</span>
<span class="lnr">45 </span>
<span class="lnr">46 </span><span class="Comment">(* [shrink (v, delta)] is a short-hand for [resize (v, size v - delta)].</span>
<span class="lnr">47 </span><span class="Comment">   [delta] must be comprised between 0 and [size v], inclusive. *)</span>
<span class="lnr">48 </span>
<span class="lnr">49 </span><span class="Keyword">val</span> shrink: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">(</span>vector a, <span class="Type">int</span><span class="Keyword">)</span> <span class="Keyword">-&gt;</span> <span class="Constant">()</span>
<span class="lnr">50 </span>
<span class="lnr">51 </span><span class="Comment">(* [pop v] is a short-hand for [shrink (v, 1)]. *)</span>
<span class="lnr">52 </span>
<span class="lnr">53 </span><span class="Keyword">val</span> pop: <span class="Keyword">[</span>a<span class="Keyword">]</span> vector a <span class="Keyword">-&gt;</span> <span class="Constant">()</span>
<span class="lnr">54 </span>
<span class="lnr">55 </span><span class="Comment">(* [get (v, i)] reads the element at index [i] in the vector [v].  Because the</span>
<span class="lnr">56 </span><span class="Comment">   value is copied, the type [a] must be duplicable.  The index [i] must be</span>
<span class="lnr">57 </span><span class="Comment">   comprised between 0, inclusive, and [size v], exclusive. *)</span>
<span class="lnr">58 </span>
<span class="lnr">59 </span><span class="Keyword">val</span> get: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">duplicable</span> a <span class="Keyword">=</span><span class="Keyword">&gt;</span> <span class="Keyword">(</span>vector a, <span class="Type">int</span><span class="Keyword">)</span> <span class="Keyword">-&gt;</span> a
<span class="lnr">60 </span>
<span class="lnr">61 </span><span class="Comment">(* [set (r, i, x)] sets the element at index [i] in the vector [v] to the</span>
<span class="lnr">62 </span><span class="Comment">   value [x]. The index [i] must be comprised between 0, inclusive, and [size</span>
<span class="lnr">63 </span><span class="Comment">   v], exclusive. *)</span>
<span class="lnr">64 </span>
<span class="lnr">65 </span><span class="Keyword">val</span> set: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">(</span>vector a, <span class="Type">int</span>, <span class="Keyword">consumes</span> a<span class="Keyword">)</span> <span class="Keyword">-&gt;</span> <span class="Constant">()</span>
<span class="lnr">66 </span>
<span class="lnr">67 </span><span class="Comment">(* [push (v, x)] appends the element [x] at the end of the vector [v]. *)</span>
<span class="lnr">68 </span>
<span class="lnr">69 </span><span class="Keyword">val</span> push: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">(</span>vector a, <span class="Keyword">consumes</span> a<span class="Keyword">)</span> <span class="Keyword">-&gt;</span> <span class="Constant">()</span>
<span class="lnr">70 </span>
<span class="lnr">71 </span><span class="Comment">(* [last v] returns the last element in the vector [v], that is, the element</span>
<span class="lnr">72 </span><span class="Comment">   at index [size v - 1]. *)</span>
<span class="lnr">73 </span>
<span class="lnr">74 </span><span class="Keyword">val</span> last: <span class="Keyword">[</span>a<span class="Keyword">]</span> <span class="Keyword">duplicable</span> a <span class="Keyword">=</span><span class="Keyword">&gt;</span> vector a <span class="Keyword">-&gt;</span> a
<span class="lnr">75 </span>
<span class="lnr">76 </span><span class="Comment">(* [sort (v, cmp)] sorts the elements of the vector [v] according to the</span>
<span class="lnr">77 </span><span class="Comment">   ordering [cmp]. *)</span>
<span class="lnr">78 </span>
<span class="lnr">79 </span><span class="Keyword">val</span> sort: <span class="Keyword">[</span>a, p : <span class="Keyword">perm]</span> <span class="Keyword">duplicable</span> a <span class="Keyword">=</span><span class="Keyword">&gt;</span> <span class="Keyword">(</span>v: vector a, cmp: <span class="Keyword">(</span>a, a <span class="Keyword">|</span> p<span class="Keyword">)</span> <span class="Keyword">-&gt;</span> <span class="Type">int</span> <span class="Keyword">|</span> p<span class="Keyword">)</span> <span class="Keyword">-&gt;</span> <span class="Constant">()</span>
<span class="lnr">80 </span>
</pre>
</body>
</html>
