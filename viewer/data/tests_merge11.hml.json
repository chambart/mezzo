{"syntax":"<div class=\"highlight\"><pre><span class=\"n\">data</span> <span class=\"kt\">bool</span> <span class=\"o\">=</span> <span class=\"nc\">True</span> <span class=\"o\">|</span> <span class=\"nc\">False</span>\n<span class=\"n\">abstract</span> <span class=\"kt\">int</span>\n<span class=\"n\">fact</span> <span class=\"n\">duplicable</span> <span class=\"kt\">int</span>\n\n<span class=\"n\">exclusive</span> <span class=\"n\">data</span> <span class=\"n\">ref</span> <span class=\"n\">a</span> <span class=\"o\">=</span> <span class=\"nc\">Nil</span> <span class=\"o\">|</span> <span class=\"nc\">Ref</span> <span class=\"o\">{</span> <span class=\"n\">contents</span><span class=\"o\">:</span> <span class=\"n\">a</span> <span class=\"o\">}</span>\n\n<span class=\"c\">(* Cet exemple permet de mettre en évidence une situation encore plus</span>\n<span class=\"c\"> * compliquée. Lors du merge, on a d&#39;un côté Nil, et l&#39;autre côté Ref, donc on</span>\n<span class=\"c\"> * essaye de convertir les deux en list α.</span>\n<span class=\"c\">*)</span>\n<span class=\"k\">val</span> <span class=\"n\">v11</span> <span class=\"o\">=</span>\n  <span class=\"k\">let</span> <span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"nc\">Ref</span> <span class=\"o\">{</span> <span class=\"n\">contents</span> <span class=\"o\">=</span> <span class=\"mi\">19</span> <span class=\"o\">}</span> <span class=\"k\">in</span>\n  <span class=\"k\">if</span> <span class=\"n\">explain</span> <span class=\"nc\">True</span> <span class=\"k\">then</span>\n    <span class=\"nc\">Nil</span>\n  <span class=\"k\">else</span>\n    <span class=\"nc\">Ref</span> <span class=\"o\">{</span> <span class=\"n\">contents</span> <span class=\"o\">=</span> <span class=\"n\">x</span> <span class=\"o\">}</span>\n</pre></div>\n","current_location":{"start":{"line":12,"col":34},"end":{"line":16,"col":24}},"file_name":"tests/merge11.hml","type":"merge","merged_env":{"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.26.3 (20100126.1600)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"434pt\" height=\"60pt\"\n viewBox=\"0.00 0.00 434.00 60.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph1\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 56)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"white\" points=\"-4,5 -4,-56 431,-56 431,5 -4,5\"/>\n<!-- node8 -->\n<g id=\"node8\" class=\"node\"><title>node8</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"0,-8 0,-44 82,-44 82,-8 0,-8\"/>\n<text text-anchor=\"middle\" x=\"41\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">ref ref int</text>\n</g>\n<!-- node6 -->\n<g id=\"node6\" class=\"node\"><title>node6</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"100,-1 100,-51 182,-51 182,-1 100,-1\"/>\n<text text-anchor=\"middle\" x=\"141\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"100,-26 182,-26 \"/>\n<text text-anchor=\"middle\" x=\"141\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">x</text>\n</g>\n<!-- node5 -->\n<g id=\"node5\" class=\"node\"><title>node5</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"200,-8 200,-44 254,-44 254,-8 200,-8\"/>\n<text text-anchor=\"middle\" x=\"227\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">int</text>\n</g>\n<!-- node3 -->\n<g id=\"node3\" class=\"node\"><title>node3</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"272,-1 272,-51 354,-51 354,-1 272,-1\"/>\n<text text-anchor=\"middle\" x=\"313\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"272,-26 354,-26 \"/>\n<text text-anchor=\"middle\" x=\"313\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">v11</text>\n</g>\n<!-- node7 -->\n<g id=\"node7\" class=\"node\"><title>node7</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"372,-8 372,-44 426,-44 426,-8 372,-8\"/>\n<text text-anchor=\"middle\" x=\"399\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">True</text>\n</g>\n</g>\n</svg>\n","root":8,"points":{"7":{"names":[["auto","/x_3"]],"locations":[{"start":{"line":13,"col":12},"end":{"line":13,"col":18}}],"kind":"term","permissions":["=/x_3","True"]},"3":{"names":[["user","v11"]],"locations":[{"start":{"line":11,"col":4},"end":{"line":11,"col":8}}],"kind":"term","permissions":["=v11"]},"5":{"names":[["auto","x_contents"]],"locations":[{"start":{"line":12,"col":27},"end":{"line":12,"col":29}}],"kind":"term","permissions":["=x_contents","int"]},"6":{"names":[["user","x"]],"locations":[{"start":{"line":12,"col":9},"end":{"line":12,"col":31}},{"start":{"line":12,"col":6},"end":{"line":12,"col":8}}],"kind":"term","permissions":["=x"]},"8":{"names":[["auto","merge_root7"]],"locations":[{"start":{"line":12,"col":34},"end":{"line":16,"col":24}}],"kind":"term","permissions":["=merge_root7","ref ref int"]}},"dot":"digraph g {\ngraph [\n  rankdir = \"BT\"\n];\n\"node8\" [\n  id = \"node8\"\n  label = \"ref\\ ref\\ int\"\n  shape = \"record\"\n];\n\"node6\" [\n  id = \"node6\"\n  label = \"{{unknown}|x}\"\n  shape = \"record\"\n];\n\"node5\" [\n  id = \"node5\"\n  label = \"int\"\n  shape = \"record\"\n];\n\"node3\" [\n  id = \"node3\"\n  label = \"{{unknown}|v11}\"\n  shape = \"record\"\n];\n\"node7\" [\n  id = \"node7\"\n  label = \"True\"\n  shape = \"record\"\n];\n}"},"sub_envs":[{"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.26.3 (20100126.1600)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"366pt\" height=\"134pt\"\n viewBox=\"0.00 0.00 366.00 134.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph1\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 130)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"white\" points=\"-4,5 -4,-130 363,-130 363,5 -4,5\"/>\n<!-- node8 -->\n<g id=\"node8\" class=\"node\"><title>node8</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"0,-8 0,-44 54,-44 54,-8 0,-8\"/>\n<text text-anchor=\"middle\" x=\"27\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">Nil</text>\n</g>\n<!-- node6 -->\n<g id=\"node6\" class=\"node\"><title>node6</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"71.5,-1 71.5,-51 186.5,-51 186.5,-1 71.5,-1\"/>\n<text text-anchor=\"middle\" x=\"90.5\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">Ref</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"109.5,-26 109.5,-51 \"/>\n<text text-anchor=\"middle\" x=\"148\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">contents</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"71.5,-26 186.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"129\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">x</text>\n</g>\n<!-- node5 -->\n<g id=\"node5\" class=\"node\"><title>node5</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"121,-89 121,-125 175,-125 175,-89 121,-89\"/>\n<text text-anchor=\"middle\" x=\"148\" y=\"-102.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">int</text>\n</g>\n<!-- node6&#45;&gt;node5 -->\n<g id=\"edge2\" class=\"edge\"><title>node6:contents&#45;&gt;node5</title>\n<path fill=\"none\" stroke=\"black\" d=\"M148,-51C148,-59.9855 148,-69.7819 148,-78.6326\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"144.5,-78.8414 148,-88.8415 151.5,-78.8415 144.5,-78.8414\"/>\n</g>\n<!-- node3 -->\n<g id=\"node3\" class=\"node\"><title>node3</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"204,-1 204,-51 286,-51 286,-1 204,-1\"/>\n<text text-anchor=\"middle\" x=\"245\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"204,-26 286,-26 \"/>\n<text text-anchor=\"middle\" x=\"245\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">v11</text>\n</g>\n<!-- node7 -->\n<g id=\"node7\" class=\"node\"><title>node7</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"304,-8 304,-44 358,-44 358,-8 304,-8\"/>\n<text text-anchor=\"middle\" x=\"331\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">True</text>\n</g>\n</g>\n</svg>\n","root":8,"points":{"7":{"names":[["auto","/x_3"]],"locations":[{"start":{"line":13,"col":12},"end":{"line":13,"col":18}}],"kind":"term","permissions":["True","=/x_3"]},"3":{"names":[["user","v11"]],"locations":[{"start":{"line":11,"col":4},"end":{"line":11,"col":8}}],"kind":"term","permissions":["=v11"]},"5":{"names":[["auto","x_contents"]],"locations":[{"start":{"line":12,"col":27},"end":{"line":12,"col":29}}],"kind":"term","permissions":["int","=x_contents"]},"6":{"names":[["user","x"]],"locations":[{"start":{"line":12,"col":9},"end":{"line":12,"col":31}},{"start":{"line":12,"col":6},"end":{"line":12,"col":8}}],"kind":"term","permissions":["Ref {\n    contents: =x_contents\n  }","=x"]},"8":{"names":[["auto","/x_4"]],"locations":[{"start":{"line":14,"col":4},"end":{"line":14,"col":7}}],"kind":"term","permissions":["Nil","=/x_4"]}},"dot":"digraph g {\ngraph [\n  rankdir = \"BT\"\n];\n\"node8\" [\n  id = \"node8\"\n  label = \"Nil\"\n  shape = \"record\"\n];\n\"node6\":contents -> \"node5\" [\n];\n\"node6\" [\n  id = \"node6\"\n  label = \"{{Ref|<contents>contents}|x}\"\n  shape = \"record\"\n];\n\"node5\" [\n  id = \"node5\"\n  label = \"int\"\n  shape = \"record\"\n];\n\"node3\" [\n  id = \"node3\"\n  label = \"{{unknown}|v11}\"\n  shape = \"record\"\n];\n\"node7\" [\n  id = \"node7\"\n  label = \"True\"\n  shape = \"record\"\n];\n}"},{"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.26.3 (20100126.1600)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"294pt\" height=\"222pt\"\n viewBox=\"0.00 0.00 294.00 222.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph1\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 218)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"white\" points=\"-4,5 -4,-218 291,-218 291,5 -4,5\"/>\n<!-- node8 -->\n<g id=\"node8\" class=\"node\"><title>node8</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"-0.5,-8 -0.5,-44 114.5,-44 114.5,-8 -0.5,-8\"/>\n<text text-anchor=\"middle\" x=\"18.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">Ref</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"37.5,-8 37.5,-44 \"/>\n<text text-anchor=\"middle\" x=\"76\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">contents</text>\n</g>\n<!-- node6 -->\n<g id=\"node6\" class=\"node\"><title>node6</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"18.5,-89 18.5,-139 133.5,-139 133.5,-89 18.5,-89\"/>\n<text text-anchor=\"middle\" x=\"37.5\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">Ref</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"56.5,-114 56.5,-139 \"/>\n<text text-anchor=\"middle\" x=\"95\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">contents</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"18.5,-114 133.5,-114 \"/>\n<text text-anchor=\"middle\" x=\"76\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">x</text>\n</g>\n<!-- node8&#45;&gt;node6 -->\n<g id=\"edge2\" class=\"edge\"><title>node8:contents&#45;&gt;node6</title>\n<path fill=\"none\" stroke=\"black\" d=\"M76,-44C76,-55.2356 76,-67.4857 76,-78.552\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"72.5001,-78.7275 76,-88.7276 79.5001,-78.7276 72.5001,-78.7275\"/>\n</g>\n<!-- node5 -->\n<g id=\"node5\" class=\"node\"><title>node5</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"68,-177 68,-213 122,-213 122,-177 68,-177\"/>\n<text text-anchor=\"middle\" x=\"95\" y=\"-190.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">int</text>\n</g>\n<!-- node6&#45;&gt;node5 -->\n<g id=\"edge4\" class=\"edge\"><title>node6:contents&#45;&gt;node5</title>\n<path fill=\"none\" stroke=\"black\" d=\"M95,-139C95,-147.985 95,-157.782 95,-166.633\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"91.5001,-166.841 95,-176.841 98.5001,-166.841 91.5001,-166.841\"/>\n</g>\n<!-- node3 -->\n<g id=\"node3\" class=\"node\"><title>node3</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"132,-1 132,-51 214,-51 214,-1 132,-1\"/>\n<text text-anchor=\"middle\" x=\"173\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"132,-26 214,-26 \"/>\n<text text-anchor=\"middle\" x=\"173\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">v11</text>\n</g>\n<!-- node7 -->\n<g id=\"node7\" class=\"node\"><title>node7</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"232,-8 232,-44 286,-44 286,-8 232,-8\"/>\n<text text-anchor=\"middle\" x=\"259\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">True</text>\n</g>\n</g>\n</svg>\n","root":8,"points":{"7":{"names":[["auto","/x_3"]],"locations":[{"start":{"line":13,"col":12},"end":{"line":13,"col":18}}],"kind":"term","permissions":["True","=/x_3"]},"3":{"names":[["user","v11"]],"locations":[{"start":{"line":11,"col":4},"end":{"line":11,"col":8}}],"kind":"term","permissions":["=v11"]},"5":{"names":[["auto","x_contents"]],"locations":[{"start":{"line":12,"col":27},"end":{"line":12,"col":29}}],"kind":"term","permissions":["int","=x_contents"]},"6":{"names":[["user","x"]],"locations":[{"start":{"line":12,"col":9},"end":{"line":12,"col":31}},{"start":{"line":12,"col":6},"end":{"line":12,"col":8}}],"kind":"term","permissions":["Ref {\n    contents: =x_contents\n  }","=x"]},"8":{"names":[["auto","/x_5"]],"locations":[{"start":{"line":16,"col":4},"end":{"line":16,"col":24}}],"kind":"term","permissions":["Ref {\n    contents: =x\n  }","=/x_5"]}},"dot":"digraph g {\ngraph [\n  rankdir = \"BT\"\n];\n\"node8\":contents -> \"node6\" [\n];\n\"node8\" [\n  id = \"node8\"\n  label = \"Ref|<contents>contents\"\n  shape = \"record\"\n];\n\"node6\":contents -> \"node5\" [\n];\n\"node6\" [\n  id = \"node6\"\n  label = \"{{Ref|<contents>contents}|x}\"\n  shape = \"record\"\n];\n\"node5\" [\n  id = \"node5\"\n  label = \"int\"\n  shape = \"record\"\n];\n\"node3\" [\n  id = \"node3\"\n  label = \"{{unknown}|v11}\"\n  shape = \"record\"\n];\n\"node7\" [\n  id = \"node7\"\n  label = \"True\"\n  shape = \"record\"\n];\n}"}]}