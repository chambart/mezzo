{"syntax":"<div class=\"highlight\"><pre><span class=\"c\">(* In-place traversal of a tree, after Sobel and Friedman (1998). *)</span>\n\n<span class=\"c\">(* If we wish to publish this example, we must cite Walker and Morrisett,</span>\n<span class=\"c\">   ``Alias Types for Recursive Data Structures&#39;&#39;, who do this already. *)</span>\n\n<span class=\"c\">(* We declare the type of trees as [exclusive] because we need trees</span>\n<span class=\"c\">   to be affine (that is, there must be no sharing) and we will</span>\n<span class=\"c\">   temporarily mutate them while we traverse them. *)</span>\n\n<span class=\"c\">(* We do not include any data in the tree, because this is an</span>\n<span class=\"c\">   orthogonal concern. *)</span>\n\n<span class=\"n\">data</span> <span class=\"kt\">bool</span> <span class=\"o\">=</span> <span class=\"nc\">False</span> <span class=\"o\">|</span> <span class=\"nc\">True</span>\n\n<span class=\"n\">exclusive</span> <span class=\"n\">data</span> <span class=\"n\">tree</span> <span class=\"o\">=</span>\n  <span class=\"o\">|</span> <span class=\"nc\">TEmpty</span>\n  <span class=\"o\">|</span> <span class=\"nc\">TNode</span> <span class=\"o\">{</span> <span class=\"n\">left</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">;</span> <span class=\"n\">right</span><span class=\"o\">:</span> <span class=\"n\">tree</span> <span class=\"o\">}</span>\n\n<span class=\"c\">(* The continuations used by the tree traversal procedure below.</span>\n<span class=\"c\">   These continuations can be thought of as contexts or zippers. *)</span>\n\n<span class=\"n\">exclusive</span> <span class=\"n\">data</span> <span class=\"n\">continuation</span> <span class=\"o\">=</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KInitial</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KLeft</span> <span class=\"o\">{</span> <span class=\"n\">father</span><span class=\"o\">:</span> <span class=\"n\">continuation</span><span class=\"o\">;</span> <span class=\"n\">right</span><span class=\"o\">:</span> <span class=\"n\">tree</span> <span class=\"o\">}</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KRight</span> <span class=\"o\">{</span> <span class=\"n\">left</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">;</span> <span class=\"n\">father</span><span class=\"o\">:</span> <span class=\"n\">continuation</span> <span class=\"o\">}</span>\n\n<span class=\"c\">(* Tree traversal. *)</span>\n\n<span class=\"c\">(* This procedure does nothing, but traverses the tree. One could adapt</span>\n<span class=\"c\">   it to actually do something at every node. *)</span>\n\n<span class=\"c\">(* Even though this procedure traverses a tree, it is tail-recursive.</span>\n<span class=\"c\">   The stack is encoded in the tree via link inversion. No memory</span>\n<span class=\"c\">   allocation is performed. *)</span>\n\n<span class=\"k\">val</span> <span class=\"k\">rec</span> <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">consumes</span> <span class=\"n\">t</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">,</span> <span class=\"n\">consumes</span> <span class=\"n\">k</span><span class=\"o\">:</span> <span class=\"n\">continuation</span><span class=\"o\">):</span> <span class=\"o\">(</span><span class=\"n\">u</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">)</span> <span class=\"o\">=</span>\n  <span class=\"c\">(* t: tree, k: continuation *)</span>\n  <span class=\"k\">match</span> <span class=\"n\">explain</span> <span class=\"n\">t</span> <span class=\"k\">with</span>\n  <span class=\"o\">|</span> <span class=\"nc\">TEmpty</span> <span class=\"o\">-&gt;</span>\n      <span class=\"n\">continue</span> <span class=\"o\">(</span><span class=\"n\">k</span><span class=\"o\">,</span> <span class=\"n\">t</span><span class=\"o\">)</span>\n  <span class=\"o\">|</span> <span class=\"nc\">TNode</span> <span class=\"o\">{</span> <span class=\"n\">left</span><span class=\"o\">;</span> <span class=\"n\">right</span> <span class=\"o\">}</span> <span class=\"o\">-&gt;</span>\n      <span class=\"c\">(* t: TNode { left = left, right = right }, left, right: tree, k: continuation *)</span>\n      <span class=\"c\">(* New syntax for mutating the tag and the fields at once: conflict in the</span>\n<span class=\"c\">       * grammar. *)</span>\n      <span class=\"c\">(* t &lt;- KLeft { father = k; right = right }; *)</span>\n      <span class=\"n\">t</span> <span class=\"o\">&lt;=</span> <span class=\"nc\">KLeft</span><span class=\"o\">;</span>\n      <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"n\">father</span> <span class=\"o\">&lt;-</span> <span class=\"n\">k</span><span class=\"o\">;</span>\n      <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"n\">right</span> <span class=\"o\">&lt;-</span> <span class=\"n\">right</span><span class=\"o\">;</span>\n      <span class=\"c\">(* t: KLeft { father = k, right = right }, left, right: tree, k: continuation *)</span>\n      <span class=\"c\">(* t: continuation, left: tree *)</span>\n      <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">left</span><span class=\"o\">,</span> <span class=\"n\">t</span><span class=\"o\">)</span>\n  <span class=\"k\">end</span>\n\n<span class=\"ow\">and</span> <span class=\"n\">continue</span> <span class=\"o\">(</span><span class=\"n\">consumes</span> <span class=\"n\">k</span><span class=\"o\">:</span> <span class=\"n\">continuation</span><span class=\"o\">,</span> <span class=\"n\">consumes</span> <span class=\"n\">t</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">):</span> <span class=\"o\">(</span><span class=\"n\">u</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">)</span> <span class=\"o\">=</span>\n  <span class=\"c\">(* k: continuation, t: tree *)</span>\n  <span class=\"k\">match</span> <span class=\"n\">k</span> <span class=\"k\">with</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KInitial</span> <span class=\"o\">-&gt;</span>\n      <span class=\"c\">(* t: tree *)</span>\n      <span class=\"n\">t</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KLeft</span> <span class=\"o\">{</span> <span class=\"n\">father</span><span class=\"o\">;</span> <span class=\"n\">right</span> <span class=\"o\">}</span> <span class=\"o\">-&gt;</span>\n      <span class=\"c\">(* k: KLeft { father = father; right = right }, father: continuation, right: tree, t: tree *)</span>\n      <span class=\"c\">(* k &lt;- KRight { left = t; father = father }; *)</span>\n      <span class=\"n\">k</span> <span class=\"o\">&lt;=</span> <span class=\"nc\">KRight</span><span class=\"o\">;</span>\n      <span class=\"n\">k</span><span class=\"o\">.</span><span class=\"n\">left</span> <span class=\"o\">&lt;-</span> <span class=\"n\">t</span><span class=\"o\">;</span>\n      <span class=\"n\">k</span><span class=\"o\">.</span><span class=\"n\">father</span> <span class=\"o\">&lt;-</span> <span class=\"n\">father</span><span class=\"o\">;</span>\n      <span class=\"c\">(* k: KRight { left = t; father = father }, father: continuation, right: tree, t: tree *)</span>\n      <span class=\"c\">(* k: continuation, right: tree *)</span>\n      <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">right</span><span class=\"o\">,</span> <span class=\"n\">k</span><span class=\"o\">)</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KRight</span> <span class=\"o\">{</span> <span class=\"n\">left</span><span class=\"o\">;</span> <span class=\"n\">father</span> <span class=\"o\">}</span> <span class=\"o\">-&gt;</span>\n      <span class=\"c\">(* k: KRight { left = left; father = father }, left: tree, father: continuation, t: tree *)</span>\n      <span class=\"c\">(* k &lt;- TNode { left = left; right = t }; *)</span>\n      <span class=\"n\">k</span> <span class=\"o\">&lt;=</span> <span class=\"nc\">TNode</span><span class=\"o\">;</span>\n      <span class=\"n\">k</span><span class=\"o\">.</span><span class=\"n\">left</span> <span class=\"o\">&lt;-</span> <span class=\"n\">left</span><span class=\"o\">;</span>\n      <span class=\"n\">k</span><span class=\"o\">.</span><span class=\"n\">right</span> <span class=\"o\">&lt;-</span> <span class=\"n\">t</span><span class=\"o\">;</span>\n      <span class=\"c\">(* k: TNode { left = left; right = t }, left: tree, father: continuation, t: tree *)</span>\n      <span class=\"c\">(* k: tree, father: continuation *)</span>\n      <span class=\"n\">continue</span> <span class=\"o\">(</span><span class=\"n\">father</span><span class=\"o\">,</span> <span class=\"n\">k</span><span class=\"o\">)</span>\n  <span class=\"k\">end</span>\n\n<span class=\"c\">(* The procedure [traverse] above is pretty simple and elegant, but has the</span>\n<span class=\"c\">   drawback that the call [traverse (t, new KInitial {})] returns a new tree,</span>\n<span class=\"c\">   instead of the original tree. The quick-and-dirty way of fixing this problem</span>\n<span class=\"c\">   is to add one dynamic check at the end, as follows. *)</span>\n\n<span class=\"k\">val</span> <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">):</span> <span class=\"bp\">()</span> <span class=\"o\">=</span>\n  <span class=\"c\">(* t: tree *)</span>\n  <span class=\"c\">(* Call the above version of [traverse] with an initial continuation. *)</span>\n  <span class=\"k\">let</span> <span class=\"n\">u</span> <span class=\"o\">=</span> <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">,</span> <span class=\"nc\">KInitial</span><span class=\"o\">)</span> <span class=\"k\">in</span>\n  <span class=\"c\">(* u: tree *)</span>\n  <span class=\"c\">(* We now have a permission for [u], and have lost the permission for</span>\n<span class=\"c\">     [t]. Fortunately, the two trees should be equal: the link inversion</span>\n<span class=\"c\">     process, in the end, reconstructs the original tree. *)</span>\n  <span class=\"k\">if</span> <span class=\"n\">explain</span> <span class=\"o\">(</span><span class=\"n\">t</span> <span class=\"o\">==</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"k\">then</span>\n    <span class=\"c\">(* We are done. *)</span>\n    <span class=\"c\">(* t: tree *)</span>\n    <span class=\"bp\">()</span>\n  <span class=\"k\">else</span>\n    <span class=\"c\">(* Oops! *)</span>\n    <span class=\"n\">fail</span>\n</pre></div>\n","current_location":{"start":{"line":36,"col":74},"end":{"line":52,"col":5}},"file_name":"tests/in_place_traversal.hml","type":"merge","merged_env":{"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.26.3 (20100126.1600)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"558pt\" height=\"148pt\"\n viewBox=\"0.00 0.00 558.00 148.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph1\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 144)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"white\" points=\"-4,5 -4,-144 555,-144 555,5 -4,5\"/>\n<!-- node8 -->\n<g id=\"node8\" class=\"node\"><title>node8</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"0,-8 0,-44 82,-44 82,-8 0,-8\"/>\n<text text-anchor=\"middle\" x=\"41\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n</g>\n<!-- node4 -->\n<g id=\"node4\" class=\"node\"><title>node4</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"99.5,-1 99.5,-51 274.5,-51 274.5,-1 99.5,-1\"/>\n<text text-anchor=\"middle\" x=\"187\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[k :: term, t :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"99.5,-26 274.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"187\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">continue</text>\n</g>\n<!-- node6 -->\n<g id=\"node6\" class=\"node\"><title>node6</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"334,-89 334,-139 416,-139 416,-89 334,-89\"/>\n<text text-anchor=\"middle\" x=\"375\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"334,-114 416,-114 \"/>\n<text text-anchor=\"middle\" x=\"375\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">k</text>\n</g>\n<!-- node5 -->\n<g id=\"node5\" class=\"node\"><title>node5</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"234,-89 234,-139 316,-139 316,-89 234,-89\"/>\n<text text-anchor=\"middle\" x=\"275\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"234,-114 316,-114 \"/>\n<text text-anchor=\"middle\" x=\"275\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">t</text>\n</g>\n<!-- node3 -->\n<g id=\"node3\" class=\"node\"><title>node3</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"375.5,-1 375.5,-51 550.5,-51 550.5,-1 375.5,-1\"/>\n<text text-anchor=\"middle\" x=\"463\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[t :: term, k :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"375.5,-26 550.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"463\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">traverse</text>\n</g>\n<!-- node7 -->\n<g id=\"node7\" class=\"node\"><title>node7</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"292,-8 292,-44 358,-44 358,-8 292,-8\"/>\n<text text-anchor=\"middle\" x=\"308.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_0</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"325,-8 325,-44 \"/>\n<text text-anchor=\"middle\" x=\"341.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_1</text>\n</g>\n<!-- node7&#45;&gt;node6 -->\n<g id=\"edge4\" class=\"edge\"><title>node7:_1&#45;&gt;node6</title>\n<path fill=\"none\" stroke=\"black\" d=\"M342,-44C342,-56.3859 346.279,-68.9287 351.756,-79.9092\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"348.706,-81.6276 356.57,-88.7277 354.851,-78.2733 348.706,-81.6276\"/>\n</g>\n<!-- node7&#45;&gt;node5 -->\n<g id=\"edge2\" class=\"edge\"><title>node7:_0&#45;&gt;node5</title>\n<path fill=\"none\" stroke=\"black\" d=\"M308,-44C308,-56.3859 303.721,-68.9287 298.244,-79.9092\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"295.149,-78.2733 293.43,-88.7277 301.294,-81.6276 295.149,-78.2733\"/>\n</g>\n</g>\n</svg>\n","root":8,"points":{"7":{"names":[["auto","/root2"]],"locations":[{"start":{"line":36,"col":17},"end":{"line":36,"col":61}}],"kind":"term","permissions":["=/root2","(=t, =k)"]},"3":{"names":[["user","traverse"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["=traverse","[t :: term, k :: term, /root2 :: term] (=/root2 | /root2 @ (=t, =k) ∗ t @ tree ∗ k @ continuation) ->\n∃(u :: term). ((=u | u @ tree) | /root2 @ (=t, =k))"]},"5":{"names":[["user","t"]],"locations":[{"start":{"line":36,"col":18},"end":{"line":36,"col":34}}],"kind":"term","permissions":["=t"]},"6":{"names":[["user","k"]],"locations":[{"start":{"line":36,"col":36},"end":{"line":36,"col":60}}],"kind":"term","permissions":["=k"]},"4":{"names":[["user","continue"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["=continue","[k :: term, t :: term, /root5 :: term] (=/root5 | /root5 @ (=k, =t) ∗ k @ continuation ∗ t @ tree) ->\n∃(u :: term). ((=u | u @ tree) | /root5 @ (=k, =t))"]},"8":{"names":[["auto","merge_root22"]],"locations":[{"start":{"line":36,"col":74},"end":{"line":52,"col":5}}],"kind":"term","permissions":["=merge_root22"]}},"dot":"digraph g {\ngraph [\n  rankdir = \"BT\"\n];\n\"node8\" [\n  id = \"node8\"\n  label = \"unknown\"\n  shape = \"record\"\n];\n\"node4\" [\n  id = \"node4\"\n  label = \"{{[k\\ ::\\ term,\\ t\\ ::\\ term,\\ /…}|continue}\"\n  shape = \"record\"\n];\n\"node6\" [\n  id = \"node6\"\n  label = \"{{unknown}|k}\"\n  shape = \"record\"\n];\n\"node5\" [\n  id = \"node5\"\n  label = \"{{unknown}|t}\"\n  shape = \"record\"\n];\n\"node3\" [\n  id = \"node3\"\n  label = \"{{[t\\ ::\\ term,\\ k\\ ::\\ term,\\ /…}|traverse}\"\n  shape = \"record\"\n];\n\"node7\":_0 -> \"node5\" [\n];\n\"node7\":_1 -> \"node6\" [\n];\n\"node7\" [\n  id = \"node7\"\n  label = \"<_0>_0|<_1>_1\"\n  shape = \"record\"\n];\n}"},"sub_envs":[{"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.26.3 (20100126.1600)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"769pt\" height=\"148pt\"\n viewBox=\"0.00 0.00 769.00 148.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph1\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 144)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"white\" points=\"-4,5 -4,-144 766,-144 766,5 -4,5\"/>\n<!-- node8 -->\n<g id=\"node8\" class=\"node\"><title>node8</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"29,-8 29,-44 95,-44 95,-8 29,-8\"/>\n<text text-anchor=\"middle\" x=\"45.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_0</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"62,-8 62,-44 \"/>\n<text text-anchor=\"middle\" x=\"78.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_1</text>\n</g>\n<!-- node6 -->\n<g id=\"node6\" class=\"node\"><title>node6</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"0,-89 0,-139 82,-139 82,-89 0,-89\"/>\n<text text-anchor=\"middle\" x=\"41\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"0,-114 82,-114 \"/>\n<text text-anchor=\"middle\" x=\"41\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">k</text>\n</g>\n<!-- node8&#45;&gt;node6 -->\n<g id=\"edge2\" class=\"edge\"><title>node8:_0&#45;&gt;node6</title>\n<path fill=\"none\" stroke=\"black\" d=\"M45,-44C45,-55.254 44.4783,-67.5091 43.8117,-78.5745\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"40.3066,-78.5387 43.1405,-88.7475 47.2914,-78.9996 40.3066,-78.5387\"/>\n</g>\n<!-- node5 -->\n<g id=\"node5\" class=\"node\"><title>node5</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"100,-89 100,-139 182,-139 182,-89 100,-89\"/>\n<text text-anchor=\"middle\" x=\"141\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"100,-114 182,-114 \"/>\n<text text-anchor=\"middle\" x=\"141\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">t</text>\n</g>\n<!-- node8&#45;&gt;node5 -->\n<g id=\"edge4\" class=\"edge\"><title>node8:_1&#45;&gt;node5</title>\n<path fill=\"none\" stroke=\"black\" d=\"M79,-44C79,-58.2392 86.2781,-70.9384 95.8471,-81.4812\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"93.5979,-84.1813 103.148,-88.7682 98.5428,-79.2267 93.5979,-84.1813\"/>\n</g>\n<!-- node4 -->\n<g id=\"node4\" class=\"node\"><title>node4</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"204.5,-1 204.5,-51 379.5,-51 379.5,-1 204.5,-1\"/>\n<text text-anchor=\"middle\" x=\"292\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[k :: term, t :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"204.5,-26 379.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"292\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">continue</text>\n</g>\n<!-- node12 -->\n<g id=\"node12\" class=\"node\"><title>node12</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"396.5,-8 396.5,-44 569.5,-44 569.5,-8 396.5,-8\"/>\n<text text-anchor=\"middle\" x=\"483\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">∃(u :: term). ((=u | u…</text>\n</g>\n<!-- node3 -->\n<g id=\"node3\" class=\"node\"><title>node3</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"586.5,-1 586.5,-51 761.5,-51 761.5,-1 586.5,-1\"/>\n<text text-anchor=\"middle\" x=\"674\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[t :: term, k :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"586.5,-26 761.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"674\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">traverse</text>\n</g>\n<!-- node7 -->\n<g id=\"node7\" class=\"node\"><title>node7</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"121,-8 121,-44 187,-44 187,-8 121,-8\"/>\n<text text-anchor=\"middle\" x=\"137.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_0</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"154,-8 154,-44 \"/>\n<text text-anchor=\"middle\" x=\"170.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_1</text>\n</g>\n<!-- node7&#45;&gt;node6 -->\n<g id=\"edge8\" class=\"edge\"><title>node7:_1&#45;&gt;node6</title>\n<path fill=\"none\" stroke=\"black\" d=\"M171,-44C171,-45.1815 127.843,-68.2397 91.2614,-87.5729\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"89.342,-84.6283 82.1328,-92.3923 92.6101,-90.8186 89.342,-84.6283\"/>\n</g>\n<!-- node7&#45;&gt;node5 -->\n<g id=\"edge6\" class=\"edge\"><title>node7:_0&#45;&gt;node5</title>\n<path fill=\"none\" stroke=\"black\" d=\"M137,-44C137,-55.254 137.522,-67.5091 138.188,-78.5745\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"134.709,-78.9996 138.859,-88.7475 141.693,-78.5387 134.709,-78.9996\"/>\n</g>\n</g>\n</svg>\n","root":12,"points":{"7":{"names":[["auto","/root2"]],"locations":[{"start":{"line":36,"col":17},"end":{"line":36,"col":61}}],"kind":"term","permissions":["(=t, =k)","=/root2"]},"3":{"names":[["user","traverse"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[t :: term, k :: term, /root2 :: term] (=/root2 | /root2 @ (=t, =k) ∗ t @ tree ∗ k @ continuation) ->\n∃(u :: term). ((=u | u @ tree) | /root2 @ (=t, =k))","=traverse"]},"5":{"names":[["user","t"]],"locations":[{"start":{"line":36,"col":18},"end":{"line":36,"col":34}},{"start":{"line":54,"col":40},"end":{"line":54,"col":56}}],"kind":"term","permissions":["=t"]},"6":{"names":[["user","k"]],"locations":[{"start":{"line":36,"col":36},"end":{"line":36,"col":60}},{"start":{"line":54,"col":14},"end":{"line":54,"col":38}}],"kind":"term","permissions":["=k"]},"12":{"names":[["auto","/x_12"]],"locations":[{"start":{"line":39,"col":13},"end":{"line":41,"col":2}}],"kind":"term","permissions":["∃(u :: term). ((=u | u @ tree) | /x_9 @ (=k, =t))","=/x_12"]},"4":{"names":[["user","continue"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[k :: term, t :: term, /root5 :: term] (=/root5 | /root5 @ (=k, =t) ∗ k @ continuation ∗ t @ tree) ->\n∃(u :: term). ((=u | u @ tree) | /root5 @ (=k, =t))","=continue"]},"8":{"names":[["auto","/x_9"],["auto","/root5"]],"locations":[{"start":{"line":40,"col":14},"end":{"line":40,"col":21}},{"start":{"line":54,"col":13},"end":{"line":54,"col":57}}],"kind":"term","permissions":["(=k, =t)","=/x_9"]}},"dot":"digraph g {\ngraph [\n  rankdir = \"BT\"\n];\n\"node8\":_0 -> \"node6\" [\n];\n\"node8\":_1 -> \"node5\" [\n];\n\"node8\" [\n  id = \"node8\"\n  label = \"<_0>_0|<_1>_1\"\n  shape = \"record\"\n];\n\"node4\" [\n  id = \"node4\"\n  label = \"{{[k\\ ::\\ term,\\ t\\ ::\\ term,\\ /…}|continue}\"\n  shape = \"record\"\n];\n\"node12\" [\n  id = \"node12\"\n  label = \"∃(u\\ ::\\ term).\\ ((=u\\ \\|\\ u…\"\n  shape = \"record\"\n];\n\"node6\" [\n  id = \"node6\"\n  label = \"{{unknown}|k}\"\n  shape = \"record\"\n];\n\"node5\" [\n  id = \"node5\"\n  label = \"{{unknown}|t}\"\n  shape = \"record\"\n];\n\"node3\" [\n  id = \"node3\"\n  label = \"{{[t\\ ::\\ term,\\ k\\ ::\\ term,\\ /…}|traverse}\"\n  shape = \"record\"\n];\n\"node7\":_0 -> \"node5\" [\n];\n\"node7\":_1 -> \"node6\" [\n];\n\"node7\" [\n  id = \"node7\"\n  label = \"<_0>_0|<_1>_1\"\n  shape = \"record\"\n];\n}"},{"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.26.3 (20100126.1600)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"1122pt\" height=\"148pt\"\n viewBox=\"0.00 0.00 1122.00 148.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph1\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 144)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"white\" points=\"-4,5 -4,-144 1119,-144 1119,5 -4,5\"/>\n<!-- node8 -->\n<g id=\"node8\" class=\"node\"><title>node8</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"0,-89 0,-139 82,-139 82,-89 0,-89\"/>\n<text text-anchor=\"middle\" x=\"41\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"0,-114 82,-114 \"/>\n<text text-anchor=\"middle\" x=\"41\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">left = t</text>\n</g>\n<!-- node4 -->\n<g id=\"node4\" class=\"node\"><title>node4</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"241.5,-1 241.5,-51 416.5,-51 416.5,-1 241.5,-1\"/>\n<text text-anchor=\"middle\" x=\"329\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[k :: term, t :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"241.5,-26 416.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"329\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">continue</text>\n</g>\n<!-- node12 -->\n<g id=\"node12\" class=\"node\"><title>node12</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"434,-8 434,-44 488,-44 488,-8 434,-8\"/>\n<text text-anchor=\"middle\" x=\"461\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">()</text>\n</g>\n<!-- node6 -->\n<g id=\"node6\" class=\"node\"><title>node6</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"200,-89 200,-139 282,-139 282,-89 200,-89\"/>\n<text text-anchor=\"middle\" x=\"241\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"200,-114 282,-114 \"/>\n<text text-anchor=\"middle\" x=\"241\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">k</text>\n</g>\n<!-- node14 -->\n<g id=\"node14\" class=\"node\"><title>node14</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"506,-8 506,-44 560,-44 560,-8 506,-8\"/>\n<text text-anchor=\"middle\" x=\"533\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">()</text>\n</g>\n<!-- node9 -->\n<g id=\"node9\" class=\"node\"><title>node9</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"578,-1 578,-51 660,-51 660,-1 578,-1\"/>\n<text text-anchor=\"middle\" x=\"619\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"578,-26 660,-26 \"/>\n<text text-anchor=\"middle\" x=\"619\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">right</text>\n</g>\n<!-- node5 -->\n<g id=\"node5\" class=\"node\"><title>node5</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"100,-89 100,-139 182,-139 182,-89 100,-89\"/>\n<text text-anchor=\"middle\" x=\"141\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"100,-114 182,-114 \"/>\n<text text-anchor=\"middle\" x=\"141\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">t = k</text>\n</g>\n<!-- node13 -->\n<g id=\"node13\" class=\"node\"><title>node13</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"678,-8 678,-44 732,-44 732,-8 678,-8\"/>\n<text text-anchor=\"middle\" x=\"705\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">()</text>\n</g>\n<!-- node3 -->\n<g id=\"node3\" class=\"node\"><title>node3</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"749.5,-1 749.5,-51 924.5,-51 924.5,-1 749.5,-1\"/>\n<text text-anchor=\"middle\" x=\"837\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[t :: term, k :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"749.5,-26 924.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"837\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">traverse</text>\n</g>\n<!-- node19 -->\n<g id=\"node19\" class=\"node\"><title>node19</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"941.5,-8 941.5,-44 1114.5,-44 1114.5,-8 941.5,-8\"/>\n<text text-anchor=\"middle\" x=\"1028\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">∃(u :: term). ((=u | u…</text>\n</g>\n<!-- node7 -->\n<g id=\"node7\" class=\"node\"><title>node7</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"158,-8 158,-44 224,-44 224,-8 158,-8\"/>\n<text text-anchor=\"middle\" x=\"174.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_0</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"191,-8 191,-44 \"/>\n<text text-anchor=\"middle\" x=\"207.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_1</text>\n</g>\n<!-- node7&#45;&gt;node6 -->\n<g id=\"edge4\" class=\"edge\"><title>node7:_1&#45;&gt;node6</title>\n<path fill=\"none\" stroke=\"black\" d=\"M208,-44C208,-56.3859 212.279,-68.9287 217.756,-79.9092\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"214.706,-81.6276 222.57,-88.7277 220.851,-78.2733 214.706,-81.6276\"/>\n</g>\n<!-- node7&#45;&gt;node5 -->\n<g id=\"edge2\" class=\"edge\"><title>node7:_0&#45;&gt;node5</title>\n<path fill=\"none\" stroke=\"black\" d=\"M174,-44C174,-56.3859 169.721,-68.9287 164.244,-79.9092\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"161.149,-78.2733 159.43,-88.7277 167.294,-81.6276 161.149,-78.2733\"/>\n</g>\n<!-- node15 -->\n<g id=\"node15\" class=\"node\"><title>node15</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"49,-8 49,-44 115,-44 115,-8 49,-8\"/>\n<text text-anchor=\"middle\" x=\"65.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_0</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"82,-8 82,-44 \"/>\n<text text-anchor=\"middle\" x=\"98.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_1</text>\n</g>\n<!-- node15&#45;&gt;node8 -->\n<g id=\"edge6\" class=\"edge\"><title>node15:_0&#45;&gt;node8</title>\n<path fill=\"none\" stroke=\"black\" d=\"M65,-44C65,-55.9238 61.8454,-68.4026 57.8236,-79.4667\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"54.5646,-78.1903 54.1235,-88.776 61.0697,-80.7759 54.5646,-78.1903\"/>\n</g>\n<!-- node15&#45;&gt;node5 -->\n<g id=\"edge8\" class=\"edge\"><title>node15:_1&#45;&gt;node5</title>\n<path fill=\"none\" stroke=\"black\" d=\"M99,-44C99,-56.9722 104.369,-69.6168 111.268,-80.5097\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"108.476,-82.6259 117.056,-88.8428 114.226,-78.6328 108.476,-82.6259\"/>\n</g>\n</g>\n</svg>\n","root":19,"points":{"15":{"names":[["auto","/x_18"],["auto","/root2"]],"locations":[{"start":{"line":51,"col":14},"end":{"line":51,"col":24}},{"start":{"line":36,"col":17},"end":{"line":36,"col":61}}],"kind":"term","permissions":["(=left, =t)","=/x_18"]},"7":{"names":[["auto","/root2"]],"locations":[{"start":{"line":36,"col":17},"end":{"line":36,"col":61}}],"kind":"term","permissions":["(=t, =k)","=/root2"]},"19":{"names":[["auto","/x_21"]],"locations":[{"start":{"line":48,"col":23},"end":{"line":51,"col":24}}],"kind":"term","permissions":["∃(u :: term). ((=u | u @ tree) | /x_18 @ (=left, =t))","=/x_21"]},"3":{"names":[["user","traverse"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[t :: term, k :: term, /root2 :: term] (=/root2 | /root2 @ (=t, =k) ∗ t @ tree ∗ k @ continuation) ->\n∃(u :: term). ((=u | u @ tree) | /root2 @ (=t, =k))","=traverse"]},"13":{"names":[["auto","/x_16"]],"locations":[{"start":{"line":47,"col":6},"end":{"line":47,"col":19}}],"kind":"term","permissions":["()","=/x_16"]},"5":{"names":[["user","t"],["user","k"]],"locations":[{"start":{"line":36,"col":18},"end":{"line":36,"col":34}},{"start":{"line":36,"col":36},"end":{"line":36,"col":60}}],"kind":"term","permissions":["=t"]},"9":{"names":[["auto","t_TNode_right"],["user","right"]],"locations":[{"start":{"line":36,"col":74},"end":{"line":52,"col":5}},{"start":{"line":41,"col":3},"end":{"line":41,"col":26}}],"kind":"term","permissions":["=t_TNode_right"]},"14":{"names":[["auto","/x_17"]],"locations":[{"start":{"line":48,"col":6},"end":{"line":48,"col":22}}],"kind":"term","permissions":["()","=/x_17"]},"6":{"names":[["user","k"]],"locations":[{"start":{"line":36,"col":36},"end":{"line":36,"col":60}}],"kind":"term","permissions":["=k"]},"12":{"names":[["auto","/x_15"]],"locations":[{"start":{"line":46,"col":6},"end":{"line":46,"col":16}}],"kind":"term","permissions":["()","=/x_15"]},"4":{"names":[["user","continue"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[k :: term, t :: term, /root5 :: term] (=/root5 | /root5 @ (=k, =t) ∗ k @ continuation ∗ t @ tree) ->\n∃(u :: term). ((=u | u @ tree) | /root5 @ (=k, =t))","=continue"]},"8":{"names":[["user","left"],["auto","t_TNode_left"],["user","t"]],"locations":[{"start":{"line":41,"col":3},"end":{"line":41,"col":26}},{"start":{"line":36,"col":74},"end":{"line":52,"col":5}},{"start":{"line":36,"col":18},"end":{"line":36,"col":34}}],"kind":"term","permissions":["=left"]}},"dot":"digraph g {\ngraph [\n  rankdir = \"BT\"\n];\n\"node8\" [\n  id = \"node8\"\n  label = \"{{unknown}|left = t}\"\n  shape = \"record\"\n];\n\"node4\" [\n  id = \"node4\"\n  label = \"{{[k\\ ::\\ term,\\ t\\ ::\\ term,\\ /…}|continue}\"\n  shape = \"record\"\n];\n\"node12\" [\n  id = \"node12\"\n  label = \"()\"\n  shape = \"record\"\n];\n\"node6\" [\n  id = \"node6\"\n  label = \"{{unknown}|k}\"\n  shape = \"record\"\n];\n\"node14\" [\n  id = \"node14\"\n  label = \"()\"\n  shape = \"record\"\n];\n\"node9\" [\n  id = \"node9\"\n  label = \"{{unknown}|right}\"\n  shape = \"record\"\n];\n\"node5\" [\n  id = \"node5\"\n  label = \"{{unknown}|t = k}\"\n  shape = \"record\"\n];\n\"node13\" [\n  id = \"node13\"\n  label = \"()\"\n  shape = \"record\"\n];\n\"node3\" [\n  id = \"node3\"\n  label = \"{{[t\\ ::\\ term,\\ k\\ ::\\ term,\\ /…}|traverse}\"\n  shape = \"record\"\n];\n\"node19\" [\n  id = \"node19\"\n  label = \"∃(u\\ ::\\ term).\\ ((=u\\ \\|\\ u…\"\n  shape = \"record\"\n];\n\"node7\":_0 -> \"node5\" [\n];\n\"node7\":_1 -> \"node6\" [\n];\n\"node7\" [\n  id = \"node7\"\n  label = \"<_0>_0|<_1>_1\"\n  shape = \"record\"\n];\n\"node15\":_0 -> \"node8\" [\n];\n\"node15\":_1 -> \"node5\" [\n];\n\"node15\" [\n  id = \"node15\"\n  label = \"<_0>_0|<_1>_1\"\n  shape = \"record\"\n];\n}"}]}