{"syntax":"<div class=\"highlight\"><pre><span class=\"c\">(* In-place traversal of a tree, after Sobel and Friedman (1998). *)</span>\n\n<span class=\"c\">(* If we wish to publish this example, we must cite Walker and Morrisett,</span>\n<span class=\"c\">   ``Alias Types for Recursive Data Structures&#39;&#39;, who do this already. *)</span>\n\n<span class=\"c\">(* We declare the type of trees as [exclusive] because we need trees</span>\n<span class=\"c\">   to be affine (that is, there must be no sharing) and we will</span>\n<span class=\"c\">   temporarily mutate them while we traverse them. *)</span>\n\n<span class=\"c\">(* We do not include any data in the tree, because this is an</span>\n<span class=\"c\">   orthogonal concern. *)</span>\n\n<span class=\"n\">data</span> <span class=\"kt\">bool</span> <span class=\"o\">=</span> <span class=\"nc\">False</span> <span class=\"o\">|</span> <span class=\"nc\">True</span>\n\n<span class=\"n\">exclusive</span> <span class=\"n\">data</span> <span class=\"n\">tree</span> <span class=\"o\">=</span>\n  <span class=\"o\">|</span> <span class=\"nc\">TEmpty</span>\n  <span class=\"o\">|</span> <span class=\"nc\">TNode</span> <span class=\"o\">{</span> <span class=\"n\">left</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">;</span> <span class=\"n\">right</span><span class=\"o\">:</span> <span class=\"n\">tree</span> <span class=\"o\">}</span>\n\n<span class=\"c\">(* The continuations used by the tree traversal procedure below.</span>\n<span class=\"c\">   These continuations can be thought of as contexts or zippers. *)</span>\n\n<span class=\"n\">exclusive</span> <span class=\"n\">data</span> <span class=\"n\">continuation</span> <span class=\"o\">=</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KInitial</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KLeft</span> <span class=\"o\">{</span> <span class=\"n\">father</span><span class=\"o\">:</span> <span class=\"n\">continuation</span><span class=\"o\">;</span> <span class=\"n\">right</span><span class=\"o\">:</span> <span class=\"n\">tree</span> <span class=\"o\">}</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KRight</span> <span class=\"o\">{</span> <span class=\"n\">left</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">;</span> <span class=\"n\">father</span><span class=\"o\">:</span> <span class=\"n\">continuation</span> <span class=\"o\">}</span>\n\n<span class=\"c\">(* Tree traversal. *)</span>\n\n<span class=\"c\">(* This procedure does nothing, but traverses the tree. One could adapt</span>\n<span class=\"c\">   it to actually do something at every node. *)</span>\n\n<span class=\"c\">(* Even though this procedure traverses a tree, it is tail-recursive.</span>\n<span class=\"c\">   The stack is encoded in the tree via link inversion. No memory</span>\n<span class=\"c\">   allocation is performed. *)</span>\n\n<span class=\"k\">val</span> <span class=\"k\">rec</span> <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">consumes</span> <span class=\"n\">t</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">,</span> <span class=\"n\">consumes</span> <span class=\"n\">k</span><span class=\"o\">:</span> <span class=\"n\">continuation</span><span class=\"o\">):</span> <span class=\"o\">(</span><span class=\"n\">u</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">)</span> <span class=\"o\">=</span>\n  <span class=\"c\">(* t: tree, k: continuation *)</span>\n  <span class=\"k\">match</span> <span class=\"n\">explain</span> <span class=\"n\">t</span> <span class=\"k\">with</span>\n  <span class=\"o\">|</span> <span class=\"nc\">TEmpty</span> <span class=\"o\">-&gt;</span>\n      <span class=\"n\">continue</span> <span class=\"o\">(</span><span class=\"n\">k</span><span class=\"o\">,</span> <span class=\"n\">t</span><span class=\"o\">)</span>\n  <span class=\"o\">|</span> <span class=\"nc\">TNode</span> <span class=\"o\">{</span> <span class=\"n\">left</span><span class=\"o\">;</span> <span class=\"n\">right</span> <span class=\"o\">}</span> <span class=\"o\">-&gt;</span>\n      <span class=\"c\">(* t: TNode { left = left, right = right }, left, right: tree, k: continuation *)</span>\n      <span class=\"c\">(* New syntax for mutating the tag and the fields at once: conflict in the</span>\n<span class=\"c\">       * grammar. *)</span>\n      <span class=\"c\">(* t &lt;- KLeft { father = k; right = right }; *)</span>\n      <span class=\"n\">t</span> <span class=\"o\">&lt;=</span> <span class=\"nc\">KLeft</span><span class=\"o\">;</span>\n      <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"n\">father</span> <span class=\"o\">&lt;-</span> <span class=\"n\">k</span><span class=\"o\">;</span>\n      <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"n\">right</span> <span class=\"o\">&lt;-</span> <span class=\"n\">right</span><span class=\"o\">;</span>\n      <span class=\"c\">(* t: KLeft { father = k, right = right }, left, right: tree, k: continuation *)</span>\n      <span class=\"c\">(* t: continuation, left: tree *)</span>\n      <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">left</span><span class=\"o\">,</span> <span class=\"n\">t</span><span class=\"o\">)</span>\n  <span class=\"k\">end</span>\n\n<span class=\"ow\">and</span> <span class=\"n\">continue</span> <span class=\"o\">(</span><span class=\"n\">consumes</span> <span class=\"n\">k</span><span class=\"o\">:</span> <span class=\"n\">continuation</span><span class=\"o\">,</span> <span class=\"n\">consumes</span> <span class=\"n\">t</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">):</span> <span class=\"o\">(</span><span class=\"n\">u</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">)</span> <span class=\"o\">=</span>\n  <span class=\"c\">(* k: continuation, t: tree *)</span>\n  <span class=\"k\">match</span> <span class=\"n\">k</span> <span class=\"k\">with</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KInitial</span> <span class=\"o\">-&gt;</span>\n      <span class=\"c\">(* t: tree *)</span>\n      <span class=\"n\">t</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KLeft</span> <span class=\"o\">{</span> <span class=\"n\">father</span><span class=\"o\">;</span> <span class=\"n\">right</span> <span class=\"o\">}</span> <span class=\"o\">-&gt;</span>\n      <span class=\"c\">(* k: KLeft { father = father; right = right }, father: continuation, right: tree, t: tree *)</span>\n      <span class=\"c\">(* k &lt;- KRight { left = t; father = father }; *)</span>\n      <span class=\"n\">k</span> <span class=\"o\">&lt;=</span> <span class=\"nc\">KRight</span><span class=\"o\">;</span>\n      <span class=\"n\">k</span><span class=\"o\">.</span><span class=\"n\">left</span> <span class=\"o\">&lt;-</span> <span class=\"n\">t</span><span class=\"o\">;</span>\n      <span class=\"n\">k</span><span class=\"o\">.</span><span class=\"n\">father</span> <span class=\"o\">&lt;-</span> <span class=\"n\">father</span><span class=\"o\">;</span>\n      <span class=\"c\">(* k: KRight { left = t; father = father }, father: continuation, right: tree, t: tree *)</span>\n      <span class=\"c\">(* k: continuation, right: tree *)</span>\n      <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">right</span><span class=\"o\">,</span> <span class=\"n\">k</span><span class=\"o\">)</span>\n  <span class=\"o\">|</span> <span class=\"nc\">KRight</span> <span class=\"o\">{</span> <span class=\"n\">left</span><span class=\"o\">;</span> <span class=\"n\">father</span> <span class=\"o\">}</span> <span class=\"o\">-&gt;</span>\n      <span class=\"c\">(* k: KRight { left = left; father = father }, left: tree, father: continuation, t: tree *)</span>\n      <span class=\"c\">(* k &lt;- TNode { left = left; right = t }; *)</span>\n      <span class=\"n\">k</span> <span class=\"o\">&lt;=</span> <span class=\"nc\">TNode</span><span class=\"o\">;</span>\n      <span class=\"n\">k</span><span class=\"o\">.</span><span class=\"n\">left</span> <span class=\"o\">&lt;-</span> <span class=\"n\">left</span><span class=\"o\">;</span>\n      <span class=\"n\">k</span><span class=\"o\">.</span><span class=\"n\">right</span> <span class=\"o\">&lt;-</span> <span class=\"n\">t</span><span class=\"o\">;</span>\n      <span class=\"c\">(* k: TNode { left = left; right = t }, left: tree, father: continuation, t: tree *)</span>\n      <span class=\"c\">(* k: tree, father: continuation *)</span>\n      <span class=\"n\">continue</span> <span class=\"o\">(</span><span class=\"n\">father</span><span class=\"o\">,</span> <span class=\"n\">k</span><span class=\"o\">)</span>\n  <span class=\"k\">end</span>\n\n<span class=\"c\">(* The procedure [traverse] above is pretty simple and elegant, but has the</span>\n<span class=\"c\">   drawback that the call [traverse (t, new KInitial {})] returns a new tree,</span>\n<span class=\"c\">   instead of the original tree. The quick-and-dirty way of fixing this problem</span>\n<span class=\"c\">   is to add one dynamic check at the end, as follows. *)</span>\n\n<span class=\"k\">val</span> <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">:</span> <span class=\"n\">tree</span><span class=\"o\">):</span> <span class=\"bp\">()</span> <span class=\"o\">=</span>\n  <span class=\"c\">(* t: tree *)</span>\n  <span class=\"c\">(* Call the above version of [traverse] with an initial continuation. *)</span>\n  <span class=\"k\">let</span> <span class=\"n\">u</span> <span class=\"o\">=</span> <span class=\"n\">traverse</span> <span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">,</span> <span class=\"nc\">KInitial</span><span class=\"o\">)</span> <span class=\"k\">in</span>\n  <span class=\"c\">(* u: tree *)</span>\n  <span class=\"c\">(* We now have a permission for [u], and have lost the permission for</span>\n<span class=\"c\">     [t]. Fortunately, the two trees should be equal: the link inversion</span>\n<span class=\"c\">     process, in the end, reconstructs the original tree. *)</span>\n  <span class=\"k\">if</span> <span class=\"n\">explain</span> <span class=\"o\">(</span><span class=\"n\">t</span> <span class=\"o\">==</span> <span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"k\">then</span>\n    <span class=\"c\">(* We are done. *)</span>\n    <span class=\"c\">(* t: tree *)</span>\n    <span class=\"bp\">()</span>\n  <span class=\"k\">else</span>\n    <span class=\"c\">(* Oops! *)</span>\n    <span class=\"n\">fail</span>\n</pre></div>\n","current_location":{"start":{"line":88,"col":35},"end":{"line":99,"col":8}},"file_name":"tests/in_place_traversal.hml","type":"merge","merged_env":{"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.26.3 (20100126.1600)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"739pt\" height=\"148pt\"\n viewBox=\"0.00 0.00 739.00 148.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph1\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 144)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"white\" points=\"-4,5 -4,-144 736,-144 736,5 -4,5\"/>\n<!-- node8 -->\n<g id=\"node8\" class=\"node\"><title>node8</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"0,-89 0,-139 54,-139 54,-89 0,-89\"/>\n<text text-anchor=\"middle\" x=\"27\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">tree</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"0,-114 54,-114 \"/>\n<text text-anchor=\"middle\" x=\"27\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">t = u</text>\n</g>\n<!-- node18 -->\n<g id=\"node18\" class=\"node\"><title>node18</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"121,-8 121,-44 175,-44 175,-8 121,-8\"/>\n<text text-anchor=\"middle\" x=\"148\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">()</text>\n</g>\n<!-- node10 -->\n<g id=\"node10\" class=\"node\"><title>node10</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"72,-89 72,-139 154,-139 154,-89 72,-89\"/>\n<text text-anchor=\"middle\" x=\"113\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"72,-114 154,-114 \"/>\n<text text-anchor=\"middle\" x=\"113\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">k</text>\n</g>\n<!-- node6 -->\n<g id=\"node6\" class=\"node\"><title>node6</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"192.5,-1 192.5,-51 367.5,-51 367.5,-1 192.5,-1\"/>\n<text text-anchor=\"middle\" x=\"280\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[k :: term, t :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"192.5,-26 367.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"280\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">continue</text>\n</g>\n<!-- node17 -->\n<g id=\"node17\" class=\"node\"><title>node17</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"385,-8 385,-44 439,-44 439,-8 385,-8\"/>\n<text text-anchor=\"middle\" x=\"412\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">bool</text>\n</g>\n<!-- node5 -->\n<g id=\"node5\" class=\"node\"><title>node5</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"456.5,-1 456.5,-51 631.5,-51 631.5,-1 456.5,-1\"/>\n<text text-anchor=\"middle\" x=\"544\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[t :: term, k :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"456.5,-26 631.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"544\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">traverse</text>\n</g>\n<!-- node11 -->\n<g id=\"node11\" class=\"node\"><title>node11</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"37,-8 37,-44 103,-44 103,-8 37,-8\"/>\n<text text-anchor=\"middle\" x=\"53.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_0</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"70,-8 70,-44 \"/>\n<text text-anchor=\"middle\" x=\"86.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_1</text>\n</g>\n<!-- node11&#45;&gt;node8 -->\n<g id=\"edge2\" class=\"edge\"><title>node11:_0&#45;&gt;node8</title>\n<path fill=\"none\" stroke=\"black\" d=\"M53,-44C53,-56.0322 49.5825,-68.5408 45.2256,-79.5988\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"41.9629,-78.3261 41.2172,-88.8946 48.3908,-81.0978 41.9629,-78.3261\"/>\n</g>\n<!-- node11&#45;&gt;node10 -->\n<g id=\"edge4\" class=\"edge\"><title>node11:_1&#45;&gt;node10</title>\n<path fill=\"none\" stroke=\"black\" d=\"M87,-44C87,-56.0322 90.4175,-68.5408 94.7744,-79.5988\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"91.6092,-81.0978 98.7828,-88.8946 98.0371,-78.3261 91.6092,-81.0978\"/>\n</g>\n<!-- node7 -->\n<g id=\"node7\" class=\"node\"><title>node7</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"649,-1 649,-51 731,-51 731,-1 649,-1\"/>\n<text text-anchor=\"middle\" x=\"690\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"649,-26 731,-26 \"/>\n<text text-anchor=\"middle\" x=\"690\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">traverse</text>\n</g>\n</g>\n</svg>\n","root":18,"points":{"7":{"names":[["user","traverse"]],"locations":[{"start":{"line":85,"col":0},"end":{"line":100,"col":0}}],"kind":"term","permissions":["=traverse"]},"11":{"names":[["auto","u_arg"],["auto","/root2"]],"locations":[{"start":{"line":88,"col":18},"end":{"line":88,"col":32}},{"start":{"line":36,"col":17},"end":{"line":36,"col":61}}],"kind":"term","permissions":["(=t, =u_arg_1)","=u_arg"]},"5":{"names":[["user","traverse"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[t :: term, k :: term, /root2 :: term] (=/root2 | /root2 @ (=t, =k) ∗ t @ tree ∗ k @ continuation) ->\n∃(u :: term). ((=u | u @ tree) | /root2 @ (=t, =k))","=traverse"]},"17":{"names":[["auto","/x_72"]],"locations":[{"start":{"line":93,"col":14},"end":{"line":93,"col":20}}],"kind":"term","permissions":["bool","=/x_72"]},"6":{"names":[["user","continue"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[k :: term, t :: term, /root5 :: term] (=/root5 | /root5 @ (=k, =t) ∗ k @ continuation ∗ t @ tree) ->\n∃(u :: term). ((=u | u @ tree) | /root5 @ (=k, =t))","=continue"]},"10":{"names":[["auto","u_arg_1"],["user","k"]],"locations":[{"start":{"line":88,"col":23},"end":{"line":88,"col":31}},{"start":{"line":36,"col":36},"end":{"line":36,"col":60}}],"kind":"term","permissions":["=u_arg_1"]},"18":{"names":[["auto","/x_73"]],"locations":[{"start":{"line":96,"col":4},"end":{"line":96,"col":6}}],"kind":"term","permissions":["()","=/x_73"]},"8":{"names":[["user","t"],["user","u"]],"locations":[{"start":{"line":36,"col":18},"end":{"line":36,"col":34}},{"start":{"line":85,"col":13},"end":{"line":85,"col":22}},{"start":{"line":88,"col":6},"end":{"line":88,"col":8}},{"start":{"line":88,"col":9},"end":{"line":88,"col":32}},{"start":{"line":36,"col":64},"end":{"line":36,"col":71}}],"kind":"term","permissions":["tree","=t"]}},"dot":"digraph g {\ngraph [\n  rankdir = \"BT\"\n];\n\"node8\" [\n  id = \"node8\"\n  label = \"{{tree}|t = u}\"\n  shape = \"record\"\n];\n\"node18\" [\n  id = \"node18\"\n  label = \"()\"\n  shape = \"record\"\n];\n\"node10\" [\n  id = \"node10\"\n  label = \"{{unknown}|k}\"\n  shape = \"record\"\n];\n\"node6\" [\n  id = \"node6\"\n  label = \"{{[k\\ ::\\ term,\\ t\\ ::\\ term,\\ /…}|continue}\"\n  shape = \"record\"\n];\n\"node17\" [\n  id = \"node17\"\n  label = \"bool\"\n  shape = \"record\"\n];\n\"node5\" [\n  id = \"node5\"\n  label = \"{{[t\\ ::\\ term,\\ k\\ ::\\ term,\\ /…}|traverse}\"\n  shape = \"record\"\n];\n\"node11\":_0 -> \"node8\" [\n];\n\"node11\":_1 -> \"node10\" [\n];\n\"node11\" [\n  id = \"node11\"\n  label = \"<_0>_0|<_1>_1\"\n  shape = \"record\"\n];\n\"node7\" [\n  id = \"node7\"\n  label = \"{{unknown}|traverse}\"\n  shape = \"record\"\n];\n}"},"sub_envs":[{"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.26.3 (20100126.1600)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"739pt\" height=\"148pt\"\n viewBox=\"0.00 0.00 739.00 148.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph1\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 144)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"white\" points=\"-4,5 -4,-144 736,-144 736,5 -4,5\"/>\n<!-- node8 -->\n<g id=\"node8\" class=\"node\"><title>node8</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"0,-89 0,-139 54,-139 54,-89 0,-89\"/>\n<text text-anchor=\"middle\" x=\"27\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">tree</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"0,-114 54,-114 \"/>\n<text text-anchor=\"middle\" x=\"27\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">t = u</text>\n</g>\n<!-- node18 -->\n<g id=\"node18\" class=\"node\"><title>node18</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"121,-8 121,-44 175,-44 175,-8 121,-8\"/>\n<text text-anchor=\"middle\" x=\"148\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">()</text>\n</g>\n<!-- node10 -->\n<g id=\"node10\" class=\"node\"><title>node10</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"72,-89 72,-139 154,-139 154,-89 72,-89\"/>\n<text text-anchor=\"middle\" x=\"113\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"72,-114 154,-114 \"/>\n<text text-anchor=\"middle\" x=\"113\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">k</text>\n</g>\n<!-- node6 -->\n<g id=\"node6\" class=\"node\"><title>node6</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"192.5,-1 192.5,-51 367.5,-51 367.5,-1 192.5,-1\"/>\n<text text-anchor=\"middle\" x=\"280\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[k :: term, t :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"192.5,-26 367.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"280\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">continue</text>\n</g>\n<!-- node17 -->\n<g id=\"node17\" class=\"node\"><title>node17</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"385,-8 385,-44 439,-44 439,-8 385,-8\"/>\n<text text-anchor=\"middle\" x=\"412\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">bool</text>\n</g>\n<!-- node5 -->\n<g id=\"node5\" class=\"node\"><title>node5</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"456.5,-1 456.5,-51 631.5,-51 631.5,-1 456.5,-1\"/>\n<text text-anchor=\"middle\" x=\"544\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[t :: term, k :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"456.5,-26 631.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"544\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">traverse</text>\n</g>\n<!-- node11 -->\n<g id=\"node11\" class=\"node\"><title>node11</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"37,-8 37,-44 103,-44 103,-8 37,-8\"/>\n<text text-anchor=\"middle\" x=\"53.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_0</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"70,-8 70,-44 \"/>\n<text text-anchor=\"middle\" x=\"86.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_1</text>\n</g>\n<!-- node11&#45;&gt;node8 -->\n<g id=\"edge2\" class=\"edge\"><title>node11:_0&#45;&gt;node8</title>\n<path fill=\"none\" stroke=\"black\" d=\"M53,-44C53,-56.0322 49.5825,-68.5408 45.2256,-79.5988\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"41.9629,-78.3261 41.2172,-88.8946 48.3908,-81.0978 41.9629,-78.3261\"/>\n</g>\n<!-- node11&#45;&gt;node10 -->\n<g id=\"edge4\" class=\"edge\"><title>node11:_1&#45;&gt;node10</title>\n<path fill=\"none\" stroke=\"black\" d=\"M87,-44C87,-56.0322 90.4175,-68.5408 94.7744,-79.5988\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"91.6092,-81.0978 98.7828,-88.8946 98.0371,-78.3261 91.6092,-81.0978\"/>\n</g>\n<!-- node7 -->\n<g id=\"node7\" class=\"node\"><title>node7</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"649,-1 649,-51 731,-51 731,-1 649,-1\"/>\n<text text-anchor=\"middle\" x=\"690\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"649,-26 731,-26 \"/>\n<text text-anchor=\"middle\" x=\"690\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">traverse</text>\n</g>\n</g>\n</svg>\n","root":18,"points":{"7":{"names":[["user","traverse"]],"locations":[{"start":{"line":85,"col":0},"end":{"line":100,"col":0}}],"kind":"term","permissions":["=traverse"]},"11":{"names":[["auto","u_arg"],["auto","/root2"]],"locations":[{"start":{"line":88,"col":18},"end":{"line":88,"col":32}},{"start":{"line":36,"col":17},"end":{"line":36,"col":61}}],"kind":"term","permissions":["(=t, =u_arg_1)","=u_arg"]},"5":{"names":[["user","traverse"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[t :: term, k :: term, /root2 :: term] (=/root2 | /root2 @ (=t, =k) ∗ t @ tree ∗ k @ continuation) ->\n∃(u :: term). ((=u | u @ tree) | /root2 @ (=t, =k))","=traverse"]},"17":{"names":[["auto","/x_72"]],"locations":[{"start":{"line":93,"col":14},"end":{"line":93,"col":20}}],"kind":"term","permissions":["bool","=/x_72"]},"6":{"names":[["user","continue"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[k :: term, t :: term, /root5 :: term] (=/root5 | /root5 @ (=k, =t) ∗ k @ continuation ∗ t @ tree) ->\n∃(u :: term). ((=u | u @ tree) | /root5 @ (=k, =t))","=continue"]},"10":{"names":[["auto","u_arg_1"],["user","k"]],"locations":[{"start":{"line":88,"col":23},"end":{"line":88,"col":31}},{"start":{"line":36,"col":36},"end":{"line":36,"col":60}}],"kind":"term","permissions":["=u_arg_1"]},"18":{"names":[["auto","/x_73"]],"locations":[{"start":{"line":96,"col":4},"end":{"line":96,"col":6}}],"kind":"term","permissions":["()","=/x_73"]},"8":{"names":[["user","t"],["user","u"]],"locations":[{"start":{"line":36,"col":18},"end":{"line":36,"col":34}},{"start":{"line":85,"col":13},"end":{"line":85,"col":22}},{"start":{"line":88,"col":6},"end":{"line":88,"col":8}},{"start":{"line":88,"col":9},"end":{"line":88,"col":32}},{"start":{"line":36,"col":64},"end":{"line":36,"col":71}}],"kind":"term","permissions":["tree","=t"]}},"dot":"digraph g {\ngraph [\n  rankdir = \"BT\"\n];\n\"node8\" [\n  id = \"node8\"\n  label = \"{{tree}|t = u}\"\n  shape = \"record\"\n];\n\"node18\" [\n  id = \"node18\"\n  label = \"()\"\n  shape = \"record\"\n];\n\"node10\" [\n  id = \"node10\"\n  label = \"{{unknown}|k}\"\n  shape = \"record\"\n];\n\"node6\" [\n  id = \"node6\"\n  label = \"{{[k\\ ::\\ term,\\ t\\ ::\\ term,\\ /…}|continue}\"\n  shape = \"record\"\n];\n\"node17\" [\n  id = \"node17\"\n  label = \"bool\"\n  shape = \"record\"\n];\n\"node5\" [\n  id = \"node5\"\n  label = \"{{[t\\ ::\\ term,\\ k\\ ::\\ term,\\ /…}|traverse}\"\n  shape = \"record\"\n];\n\"node11\":_0 -> \"node8\" [\n];\n\"node11\":_1 -> \"node10\" [\n];\n\"node11\" [\n  id = \"node11\"\n  label = \"<_0>_0|<_1>_1\"\n  shape = \"record\"\n];\n\"node7\" [\n  id = \"node7\"\n  label = \"{{unknown}|traverse}\"\n  shape = \"record\"\n];\n}"},{"svg":"<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n<!-- Generated by graphviz version 2.26.3 (20100126.1600)\n -->\n<!-- Title: g Pages: 1 -->\n<svg width=\"860pt\" height=\"148pt\"\n viewBox=\"0.00 0.00 860.00 148.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<g id=\"graph1\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 144)\">\n<title>g</title>\n<polygon fill=\"white\" stroke=\"white\" points=\"-4,5 -4,-144 857,-144 857,5 -4,5\"/>\n<!-- node8 -->\n<g id=\"node8\" class=\"node\"><title>node8</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"0,-89 0,-139 82,-139 82,-89 0,-89\"/>\n<text text-anchor=\"middle\" x=\"41\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"0,-114 82,-114 \"/>\n<text text-anchor=\"middle\" x=\"41\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">t</text>\n</g>\n<!-- node18 -->\n<g id=\"node18\" class=\"node\"><title>node18</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"142,-8 142,-44 224,-44 224,-8 142,-8\"/>\n<text text-anchor=\"middle\" x=\"183\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n</g>\n<!-- node10 -->\n<g id=\"node10\" class=\"node\"><title>node10</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"100,-89 100,-139 182,-139 182,-89 100,-89\"/>\n<text text-anchor=\"middle\" x=\"141\" y=\"-122.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"100,-114 182,-114 \"/>\n<text text-anchor=\"middle\" x=\"141\" y=\"-97.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">k</text>\n</g>\n<!-- node6 -->\n<g id=\"node6\" class=\"node\"><title>node6</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"241.5,-1 241.5,-51 416.5,-51 416.5,-1 241.5,-1\"/>\n<text text-anchor=\"middle\" x=\"329\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[k :: term, t :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"241.5,-26 416.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"329\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">continue</text>\n</g>\n<!-- node17 -->\n<g id=\"node17\" class=\"node\"><title>node17</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"434,-8 434,-44 488,-44 488,-8 434,-8\"/>\n<text text-anchor=\"middle\" x=\"461\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">bool</text>\n</g>\n<!-- node5 -->\n<g id=\"node5\" class=\"node\"><title>node5</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"505.5,-1 505.5,-51 680.5,-51 680.5,-1 505.5,-1\"/>\n<text text-anchor=\"middle\" x=\"593\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">[t :: term, k :: term, /…</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"505.5,-26 680.5,-26 \"/>\n<text text-anchor=\"middle\" x=\"593\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">traverse</text>\n</g>\n<!-- node11 -->\n<g id=\"node11\" class=\"node\"><title>node11</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"58,-8 58,-44 124,-44 124,-8 58,-8\"/>\n<text text-anchor=\"middle\" x=\"74.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_0</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"91,-8 91,-44 \"/>\n<text text-anchor=\"middle\" x=\"107.5\" y=\"-21.9\" font-family=\"Times Roman,serif\" font-size=\"14.00\">_1</text>\n</g>\n<!-- node11&#45;&gt;node8 -->\n<g id=\"edge2\" class=\"edge\"><title>node11:_0&#45;&gt;node8</title>\n<path fill=\"none\" stroke=\"black\" d=\"M74,-44C74,-56.3859 69.7206,-68.9287 64.244,-79.9092\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"61.1495,-78.2733 59.4297,-88.7277 67.2935,-81.6276 61.1495,-78.2733\"/>\n</g>\n<!-- node11&#45;&gt;node10 -->\n<g id=\"edge4\" class=\"edge\"><title>node11:_1&#45;&gt;node10</title>\n<path fill=\"none\" stroke=\"black\" d=\"M108,-44C108,-56.3859 112.279,-68.9287 117.756,-79.9092\"/>\n<polygon fill=\"black\" stroke=\"black\" points=\"114.706,-81.6276 122.57,-88.7277 120.851,-78.2733 114.706,-81.6276\"/>\n</g>\n<!-- node7 -->\n<g id=\"node7\" class=\"node\"><title>node7</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"698,-1 698,-51 780,-51 780,-1 698,-1\"/>\n<text text-anchor=\"middle\" x=\"739\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">unknown</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"698,-26 780,-26 \"/>\n<text text-anchor=\"middle\" x=\"739\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">traverse</text>\n</g>\n<!-- node15 -->\n<g id=\"node15\" class=\"node\"><title>node15</title>\n<polygon fill=\"none\" stroke=\"black\" points=\"798,-1 798,-51 852,-51 852,-1 798,-1\"/>\n<text text-anchor=\"middle\" x=\"825\" y=\"-34.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">tree</text>\n<polyline fill=\"none\" stroke=\"black\" points=\"798,-26 852,-26 \"/>\n<text text-anchor=\"middle\" x=\"825\" y=\"-9.4\" font-family=\"Times Roman,serif\" font-size=\"14.00\">u</text>\n</g>\n</g>\n</svg>\n","root":18,"points":{"15":{"names":[["user","u"]],"locations":[{"start":{"line":36,"col":64},"end":{"line":36,"col":71}},{"start":{"line":88,"col":9},"end":{"line":88,"col":32}},{"start":{"line":88,"col":6},"end":{"line":88,"col":8}}],"kind":"term","permissions":["tree","=u"]},"7":{"names":[["user","traverse"]],"locations":[{"start":{"line":85,"col":0},"end":{"line":100,"col":0}}],"kind":"term","permissions":["=traverse"]},"11":{"names":[["auto","u_arg"],["auto","/root2"]],"locations":[{"start":{"line":88,"col":18},"end":{"line":88,"col":32}},{"start":{"line":36,"col":17},"end":{"line":36,"col":61}}],"kind":"term","permissions":["(=t, =u_arg_1)","=u_arg"]},"5":{"names":[["user","traverse"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[t :: term, k :: term, /root2 :: term] (=/root2 | /root2 @ (=t, =k) ∗ t @ tree ∗ k @ continuation) ->\n∃(u :: term). ((=u | u @ tree) | /root2 @ (=t, =k))","=traverse"]},"17":{"names":[["auto","/x_72"]],"locations":[{"start":{"line":93,"col":14},"end":{"line":93,"col":20}}],"kind":"term","permissions":["bool","=/x_72"]},"6":{"names":[["user","continue"]],"locations":[{"start":{"line":36,"col":0},"end":{"line":85,"col":0}}],"kind":"term","permissions":["[k :: term, t :: term, /root5 :: term] (=/root5 | /root5 @ (=k, =t) ∗ k @ continuation ∗ t @ tree) ->\n∃(u :: term). ((=u | u @ tree) | /root5 @ (=k, =t))","=continue"]},"10":{"names":[["auto","u_arg_1"],["user","k"]],"locations":[{"start":{"line":88,"col":23},"end":{"line":88,"col":31}},{"start":{"line":36,"col":36},"end":{"line":36,"col":60}}],"kind":"term","permissions":["=u_arg_1"]},"18":{"names":[["auto","/inconsistent"]],"locations":[{"start":{"line":99,"col":4},"end":{"line":99,"col":8}}],"kind":"term","permissions":["=/inconsistent"]},"8":{"names":[["user","t"]],"locations":[{"start":{"line":85,"col":13},"end":{"line":85,"col":22}},{"start":{"line":36,"col":18},"end":{"line":36,"col":34}}],"kind":"term","permissions":["=t"]}},"dot":"digraph g {\ngraph [\n  rankdir = \"BT\"\n];\n\"node8\" [\n  id = \"node8\"\n  label = \"{{unknown}|t}\"\n  shape = \"record\"\n];\n\"node18\" [\n  id = \"node18\"\n  label = \"unknown\"\n  shape = \"record\"\n];\n\"node10\" [\n  id = \"node10\"\n  label = \"{{unknown}|k}\"\n  shape = \"record\"\n];\n\"node6\" [\n  id = \"node6\"\n  label = \"{{[k\\ ::\\ term,\\ t\\ ::\\ term,\\ /…}|continue}\"\n  shape = \"record\"\n];\n\"node17\" [\n  id = \"node17\"\n  label = \"bool\"\n  shape = \"record\"\n];\n\"node5\" [\n  id = \"node5\"\n  label = \"{{[t\\ ::\\ term,\\ k\\ ::\\ term,\\ /…}|traverse}\"\n  shape = \"record\"\n];\n\"node11\":_0 -> \"node8\" [\n];\n\"node11\":_1 -> \"node10\" [\n];\n\"node11\" [\n  id = \"node11\"\n  label = \"<_0>_0|<_1>_1\"\n  shape = \"record\"\n];\n\"node7\" [\n  id = \"node7\"\n  label = \"{{unknown}|traverse}\"\n  shape = \"record\"\n];\n\"node15\" [\n  id = \"node15\"\n  label = \"{{tree}|u}\"\n  shape = \"record\"\n];\n}"}]}