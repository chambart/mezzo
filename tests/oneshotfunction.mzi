(* A one-shot function is an affine resource. *)

abstract osf a b

(* Creation. *)

(* One can build one-shot instances of any function. *)

val osf_make: [a, b, p: perm] (f: (consumes (a | p)) -> b | consumes p) -> osf a b

(* Application of a one-shot function consumes the function. *)

val osf_apply: [a, b] (consumes x: a, consumes f: osf a b) -> b


val osf_compose: [a, b, c] (consumes f: osf a b, consumes g: osf b c) -> osf a c

