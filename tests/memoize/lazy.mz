open atomic

(* The type I wish: a pointer to the contents of the thunk, and a lock
   that protects the exclusive permission to this contents. *)

data thunk a =
  Thunk { contents: unknown; lock: lock (contents @ a) }

(* Variant: a thunk is mutable structure that may be or not be evaluated,
   and the caller is responsible for adding the required locks. *)
