open Absdefs

(* Make sure folding and unfolding (including instantiating the initial
 * "adopts ‚ä•" clause) work for structural types in the presence of adopts
 * directives. *)

mutable data foo = Foo adopts t_x

val (v: foo) = Foo
val f (consumes x: foo): foo = x
