(* This test is just super-fragile! It relies on the inference algorithm
 * visiting the left-hand side of the tuple first, and then going into the
 * right-hand side! FIXME understand why this matters (shouldn't matter?!!) *)
val foo () : (x: int, f: =x -> int) =
  let k = 3 in
  let f (y: =k) : int =
    y + 1
  in
  k, f

val g : int =
  let x, f = foo() in
  f x

